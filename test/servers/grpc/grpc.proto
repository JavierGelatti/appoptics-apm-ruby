syntax = "proto3";

// Process with:
// bundle exec grpc_tools_ruby_protoc test/servers/grpc/grpc.proto --ruby_out . --grpc_out .

package grpctest;

<<<<<<< HEAD
<<<<<<< HEAD
service TestService {
    // unary
    rpc unary_1 (Address) returns (AddressId);
    rpc unary_2 (AddressId) returns (Address);
    rpc unary_cancel(NullMessage) returns(NullMessage);
    rpc unary_unimplemented(NullMessage) returns(NullMessage);

    // client streaming
    rpc client_stream(stream Phone) returns (NullMessage);
=======
service AddressService {
=======
service TestService {
>>>>>>> [grpc/test] add bidi service to .proto and include README
    // unary
    rpc unary_1 (Address) returns (AddressId);
    rpc unary_2 (AddressId) returns (Address);
    rpc unary_cancel(NullMessage) returns(NullMessage);
    rpc unary_unimplemented(NullMessage) returns(NullMessage);

    // client streaming
<<<<<<< HEAD
    rpc add_phones(stream Phone) returns (NullMessage);
>>>>>>> [grpc wip] add client instrumentation and most tests
=======
    rpc client_stream(stream Phone) returns (NullMessage);
>>>>>>> [grpc/test] add bidi service to .proto and include README
    rpc client_stream_cancel(stream Phone) returns (NullMessage);
    rpc client_stream_unimplemented(stream Phone) returns (NullMessage);

    // server streaming
<<<<<<< HEAD
<<<<<<< HEAD
    rpc server_stream (AddressId)  returns (stream Phone);
    rpc server_stream_cancel(NullMessage) returns(stream Phone);
    rpc server_stream_unimplemented(NullMessage) returns(stream Phone);

    // bidi streaming
    rpc bidi_stream(stream Phone) returns (stream Phone);
    rpc bidi_stream_cancel(stream Phone) returns (stream Phone);
    rpc bidi_stream_unknown(stream Phone) returns (stream Phone);
    rpc bidi_stream_unimplemented(stream Phone) returns (stream Phone);
=======
    rpc get_phones (AddressId)  returns (stream Phone);
    rpc server_stream_cancel(NullMessage) returns(stream Phone);
    rpc server_stream_unimplemented(NullMessage) returns(stream Phone);
>>>>>>> [grpc wip] add client instrumentation and most tests
=======
    rpc server_stream (AddressId)  returns (stream Phone);
    rpc server_stream_cancel(NullMessage) returns(stream Phone);
    rpc server_stream_unimplemented(NullMessage) returns(stream Phone);

    // bidi streaming
    rpc bidi_stream(stream Phone) returns (stream Phone);
    rpc bidi_stream_cancel(stream Phone) returns (stream Phone);
    rpc bidi_stream_unimplemented(stream Phone) returns (stream Phone);
>>>>>>> [grpc/test] add bidi service to .proto and include README
}

message NullMessage {}

message Phone {
    string number = 1;
    string type = 2;
}

message AddressId {
    int32 id = 1;
}

message Address {
    AddressId id = 5;
    string street = 1;
    int32 number = 2;
    string town = 3;
    repeated Phone phonenumbers = 4;
}
